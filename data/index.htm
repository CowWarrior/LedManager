<!DOCTYPE html><html><head><title>Mini LED Server</title><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@3.3.7/dist/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@3.3.7/dist/css/bootstrap-theme.min.css" integrity="sha384-rHyoN1iRsVXV4nD0JutlnGaslCJuC7uwjduW9SVrLvRYooPp2bWYgmgJQIXwl/Sp" crossorigin="anonymous"><link rel="icon" type="image/x-icon" href="/favicon.ico"></head><body><div class="jumbotron"><div class="container"><h1>Mini LED Server</h1><p>Control your LEDstrip or array from here.</p></div></div><div class="container"><div class="row"><div class="col-md-4"><h2>Effect</h2><p>Run a predefined effect: <select id="cbxEffect"><option value="default" selected>Default</option><option value="rainbow">Rainbow</option><option value="solid">Solid Color</option><option value="link">Link</option></select> <input id="colSolid" type="color"></p><p><a class="btn btn-primary" id="btnEffect" href="#" role="button">Set Effect</a></p></div><div class="col-md-4"><h2>Brightness</h2><p>Set brightness to : <span id="txtBrightness">64</span></p><p><input type="range" min="0" max="255" value="64" class="slider" id="sldBrightness"></p><p><a class="btn btn-default" id="btnBrightness" href="#" role="button">Set Brightness</a></p></div><div class="col-md-4"><h2>Image</h2><p>Delete an existing image <select id="cbxImageDelete"></select> <input type="button" value="Delete" class="btn btn-danger" id="btnDeleteImage" role="button" disabled></p><p>Upload a new image (<span id="w">0</span>x<span id="h">0</span>) <input type="file" id="btnBrowse"></p><p><canvas id="cvsImage" width="32" height="32"></p><p><input type="text" value="" id="txtImageName" minlength="3" maxlength="24" pattern="[a-zA-Z0-9_]+"> <input type="button" value="Upload" class="btn btn-success" id="btnImage" role="button" disabled></p><p></p><div id="txtInvalidImageName" class="alert alert-warning">The image name is invalid. It must contain only letters and numbers, and have from 3 to 24 characters.</div><p></p></div></div><hr><footer><p>Mini LED Server</p></footer></div><script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/bootstrap@3.3.7/dist/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script><script lang="JavaScript">function readURL(e){if(e.files&&e.files[0]){var t=new FileReader;t.onload=function(e){var t=new Image;t.onload=function(){getImageInfo(this)},t.src=e.target.result,validateUploadForm()},t.readAsDataURL(e.files[0]),$("#txtImageName").val(e.files[0].name.replace(".","_"))}}function getImageInfo(e){var t=document.getElementById("cvsImage").getContext("2d");t.drawImage(e,0,0),$("#h").text(e.height),$("#w").text(e.width)}function getImageList(){var e="./images";$.ajax({url:e,success:function(e){console.log(e);var t=e.FilesList;if(t){$("#cbxImageDelete").html("");for(var a=0;a<t.length;a++)$("#cbxImageDelete").append('<option value="'+t[a]+'">'+t[a]+"</option>")}}})}function validateUploadForm(){var e=$("#txtImageName").attr("pattern"),t=new RegExp("^"+e+"$");t.test($("#txtImageName").val())?($("#txtInvalidImageName").hide(),""!=$("#btnBrowse").val()?$("#btnImage").prop("disabled",!1):$("#btnImage").prop("disabled",!0)):($("#btnImage").prop("disabled",!0),$("#txtInvalidImageName").show())}$(function(){$("#btnEffect").on("click",function(){var e="./effect",t={name:$("#cbxEffect").val(),color:$("#colSolid").val().replace("#","")};$.ajax({url:e,data:t})}),$("#btnBrightness").on("click",function(){var e=parseInt($("#sldBrightness").val()),t="./effect",a={brightness:e.toString(16)};$.ajax({url:t,data:a})}),$("#sldBrightness").on("input",function(){var e=parseInt($("#sldBrightness").val());$("#txtBrightness").text(e.toString(16).toUpperCase())}),$("#btnBrowse").change(function(){readURL(this)}),$("#txtImageName").change(function(){validateUploadForm()}),$("#btnImage").on("click",function(){var e=document.getElementById("cvsImage").getContext("2d"),t=new Uint8Array(e.getImageData(0,0,15,15).data),a=$("#txtImageName").val(),n="";for(i=0;i<t.length;i++)n+=t[i].toString(16);var o="./image?imgname="+a+"&imgdata="+n;$.ajax({url:o,type:"PUT",processData:!1})}),getImageList()})</script></body></html>